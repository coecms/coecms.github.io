
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>How to create NetCDF files &#8212; CLEX CMS Blog</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="model" href="../contents/tag-model.html" />
    <link rel="prev" title="fortran" href="../contents/tag-fortran.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/CE-logo-COL-clex-vert-web.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">CLEX CMS Blog</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    CLEX CMS Blog
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Latest
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="2022-12-05-building-on-gadi.html">
   Using Gadi’s software environment to build your applications
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022-11-10-jobfs.html">
   How and when to use PBS Jobfs on NCI HPC systems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022-10-26-Data-Quarantine.html">
   Data Quarantine
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022-04-26-storage-where-what-why-how.html">
   Storage - where, what, why and how?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022-03-15-reading-nonstandard-data.html">
   An example of reading non-standard data using pandas and xarray
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tags
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-bash.html">
   bash
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-04-02-filter-file-lists-with-sed.html">
     Filter Lists of Files in bash Using sed
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-climatology.html">
   climatology
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-07-29-coarsen_climatology.html">
     Climatologies with ‘Coarsen’
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-cmip.html">
   cmip
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-08-16-search-cmip5-data-interactively.html">
     Using ARCCSSive to search CMIP5
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-28-climate-finder-introduction.html">
     Using CleF - Climate Finder to discover ESGF data at NCI
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-10-12-climate-finder-extended-command-line.html">
     Using CleF 2: advanced command line functionalities
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-dask.html">
   dask
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-09-14-dask-era-interim.html">
     Speeding up access to large datasets with Dask Delayed
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-11-24-api.html">
     API Calculation with Xarray + Dask
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-data.html">
   data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-08-16-search-cmip5-data-interactively.html">
     Using ARCCSSive to search CMIP5
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-10-19-mppnccombine-fast.html">
     Fast MOM collation with payu and mppnncombine-fast
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-10-26-Setting-up-NetCDF-file-attributes.html">
     Setting up NetCDF file attributes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-01-18-using-opendap.html">
     Using OPeNDAP to access data remotely: MUR example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-28-climate-finder-introduction.html">
     Using CleF - Climate Finder to discover ESGF data at NCI
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-10-12-climate-finder-extended-command-line.html">
     Using CleF 2: advanced command line functionalities
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2022-04-26-storage-where-what-why-how.html">
     Storage - where, what, why and how?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2022-11-10-jobfs.html">
     How and when to use PBS Jobfs on NCI HPC systems
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-debug.html">
   debug
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-08-10-Fortran-Debugging-Videos.html">
     Fortran Debugging Video Series
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-events.html">
   events
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-28-eventdetection.html">
     Basic event statistics
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../contents/tag-fortran.html">
   fortran
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="2018-08-10-Fortran-Debugging-Videos.html">
     Fortran Debugging Video Series
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     How to create NetCDF files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2022-12-05-building-on-gadi.html">
     Using Gadi’s software environment to build your applications
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-model.html">
   model
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-03-01-coupling-resolution.html">
     Setting up a coupled model at a new resolution
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../contents/tag-netcdf.html">
   netcdf
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="2018-05-22-python-netcdf.html">
     Python Tuesday: NetCDF Python library overview
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     How to create NetCDF files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-10-26-Setting-up-NetCDF-file-attributes.html">
     Setting up NetCDF file attributes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2022-04-26-storage-where-what-why-how.html">
     Storage - where, what, why and how?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2022-11-10-jobfs.html">
     How and when to use PBS Jobfs on NCI HPC systems
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-paleoclimate.html">
   paleoclimate
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2022-03-15-reading-nonstandard-data.html">
     An example of reading non-standard data using pandas and xarray
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-pandas.html">
   pandas
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2022-03-15-reading-nonstandard-data.html">
     An example of reading non-standard data using pandas and xarray
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-payu.html">
   payu
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-10-19-mppnccombine-fast.html">
     Fast MOM collation with payu and mppnncombine-fast
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-plotting.html">
   plotting
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-04-19-cartopy-maps.html">
     Improving maps with Cartopy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-04-19-plotting-basics.html">
     Python Plotting Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-04-27-subplots.html">
     Subplots
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-04-27-xarray-plot-types.html">
     Xarray plot types
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-05-01-latlon-reference.html">
     Making a lat-lon reference plot
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-08-21-visualisation-in-shiny-app.html">
     Visualisation in a Shiny App
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-09-28-line-plots-with-xarray.html">
     Review of line plots with Xarray
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-03-06-generating-print-quality-plots.html">
     Generating print-quality plots in R
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-09-03-python-animation.html">
     How to animate 2D fields
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-22-wrapping-pcolormesh.html">
     Wrapping gridded data around the globe
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-23-split-yaxis.html">
     Split Y Axis plots
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-pyproj.html">
   pyproj
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-10-01-pyproj.html">
     Converting between coordinate systems with Pyproj
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-11-02-pyproj-regrid.html">
     Regridding from one coordinate system to another with pyproj
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../contents/tag-python.html">
   python
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
  <label for="toctree-checkbox-16">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="2018-04-19-cartopy-maps.html">
     Improving maps with Cartopy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-04-19-plotting-basics.html">
     Python Plotting Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-04-24-reading-envi-met.html">
     Reading ENVI_MET files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-04-27-subplots.html">
     Subplots
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-04-27-xarray-plot-types.html">
     Xarray plot types
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-05-01-latlon-reference.html">
     Making a lat-lon reference plot
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-05-22-python-netcdf.html">
     Python Tuesday: NetCDF Python library overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-08-02-Merge-arrays-with-missing-data.html">
     Merge arrays with missing data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-08-16-search-cmip5-data-interactively.html">
     Using ARCCSSive to search CMIP5
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-09-14-dask-era-interim.html">
     Speeding up access to large datasets with Dask Delayed
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-09-28-line-plots-with-xarray.html">
     Review of line plots with Xarray
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-10-05-introduction-to-python-logging.html">
     Basic usage of python logging module
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     How to create NetCDF files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-11-27-Value-when-other-is-max.html">
     Find the value of a variable at the times when another variable is maximum
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-01-18-using-opendap.html">
     Using OPeNDAP to access data remotely: MUR example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-07-29-multi-apply-along-axis.html">
     Per-gridpoint time correlation of two models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-09-03-python-animation.html">
     How to animate 2D fields
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-22-wrapping-pcolormesh.html">
     Wrapping gridded data around the globe
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-23-split-yaxis.html">
     Split Y Axis plots
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-28-eventdetection.html">
     Basic event statistics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-04-09-xesmf-regrid.html">
     Using xesmf to efficiently regrid data to another resolution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2022-12-05-building-on-gadi.html">
     Using Gadi’s software environment to build your applications
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-r.html">
   r
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
  <label for="toctree-checkbox-17">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-08-21-visualisation-in-shiny-app.html">
     Visualisation in a Shiny App
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-03-06-generating-print-quality-plots.html">
     Generating print-quality plots in R
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-regridding.html">
   regridding
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
  <label for="toctree-checkbox-18">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-03-01-coupling-resolution.html">
     Setting up a coupled model at a new resolution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-04-09-xesmf-regrid.html">
     Using xesmf to efficiently regrid data to another resolution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-11-02-pyproj-regrid.html">
     Regridding from one coordinate system to another with pyproj
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-storage.html">
   storage
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/>
  <label for="toctree-checkbox-19">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2022-04-26-storage-where-what-why-how.html">
     Storage - where, what, why and how?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2022-11-10-jobfs.html">
     How and when to use PBS Jobfs on NCI HPC systems
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-video.html">
   video
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/>
  <label for="toctree-checkbox-20">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-08-10-Fortran-Debugging-Videos.html">
     Fortran Debugging Video Series
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/tag-xarray.html">
   xarray
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/>
  <label for="toctree-checkbox-21">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-04-24-reading-envi-met.html">
     Reading ENVI_MET files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-04-27-xarray-plot-types.html">
     Xarray plot types
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-05-22-python-netcdf.html">
     Python Tuesday: NetCDF Python library overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-08-02-Merge-arrays-with-missing-data.html">
     Merge arrays with missing data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-09-14-dask-era-interim.html">
     Speeding up access to large datasets with Dask Delayed
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-09-28-line-plots-with-xarray.html">
     Review of line plots with Xarray
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-11-27-Value-when-other-is-max.html">
     Find the value of a variable at the times when another variable is maximum
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-01-18-using-opendap.html">
     Using OPeNDAP to access data remotely: MUR example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-07-29-multi-apply-along-axis.html">
     Per-gridpoint time correlation of two models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-07-29-coarsen_climatology.html">
     Climatologies with ‘Coarsen’
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-10-01-pyproj.html">
     Converting between coordinate systems with Pyproj
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-11-02-pyproj-regrid.html">
     Regridding from one coordinate system to another with pyproj
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-11-24-api.html">
     API Calculation with Xarray + Dask
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2022-03-15-reading-nonstandard-data.html">
     An example of reading non-standard data using pandas and xarray
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Archive
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/year-2022.html">
   2022
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/>
  <label for="toctree-checkbox-22">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2022-12-05-building-on-gadi.html">
     Using Gadi’s software environment to build your applications
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2022-11-10-jobfs.html">
     How and when to use PBS Jobfs on NCI HPC systems
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2022-10-26-Data-Quarantine.html">
     Data Quarantine
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2022-04-26-storage-where-what-why-how.html">
     Storage - where, what, why and how?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2022-03-15-reading-nonstandard-data.html">
     An example of reading non-standard data using pandas and xarray
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/year-2021.html">
   2021
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/>
  <label for="toctree-checkbox-23">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-12-08-trajectories.html">
     Trajectories in regions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-11-24-api.html">
     API Calculation with Xarray + Dask
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-11-02-pyproj-regrid.html">
     Regridding from one coordinate system to another with pyproj
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-10-01-pyproj.html">
     Converting between coordinate systems with Pyproj
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-10-01-different_coordinates.html">
     Effect of rounding on coordinates with Xarray
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-09-30-code-design.html">
     Example to improve code design
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-07-29-coarsen_climatology.html">
     Climatologies with ‘Coarsen’
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2021-04-09-xesmf-regrid.html">
     Using xesmf to efficiently regrid data to another resolution
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/year-2020.html">
   2020
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" type="checkbox"/>
  <label for="toctree-checkbox-24">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-10-12-climate-finder-extended-command-line.html">
     Using CleF 2: advanced command line functionalities
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-28-eventdetection.html">
     Basic event statistics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-28-climate-finder-introduction.html">
     Using CleF - Climate Finder to discover ESGF data at NCI
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-23-split-yaxis.html">
     Split Y Axis plots
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-22-wrapping-pcolormesh.html">
     Wrapping gridded data around the globe
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contents/year-2019.html">
   2019
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" type="checkbox"/>
  <label for="toctree-checkbox-25">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-11-12_Calendars_and_monthly_data.html">
     Compare data with different calendars
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-09-03-python-animation.html">
     How to animate 2D fields
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-07-29-multi-apply-along-axis.html">
     Per-gridpoint time correlation of two models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-04-02-filter-file-lists-with-sed.html">
     Filter Lists of Files in bash Using sed
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-03-06-generating-print-quality-plots.html">
     Generating print-quality plots in R
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-03-01-coupling-resolution.html">
     Setting up a coupled model at a new resolution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2019-01-18-using-opendap.html">
     Using OPeNDAP to access data remotely: MUR example
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../contents/year-2018.html">
   2018
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" type="checkbox"/>
  <label for="toctree-checkbox-26">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="2018-11-27-Value-when-other-is-max.html">
     Find the value of a variable at the times when another variable is maximum
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-10-26-Setting-up-NetCDF-file-attributes.html">
     Setting up NetCDF file attributes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-10-19-mppnccombine-fast.html">
     Fast MOM collation with payu and mppnncombine-fast
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     How to create NetCDF files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-10-05-introduction-to-python-logging.html">
     Basic usage of python logging module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-09-28-line-plots-with-xarray.html">
     Review of line plots with Xarray
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-09-14-dask-era-interim.html">
     Speeding up access to large datasets with Dask Delayed
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-08-21-visualisation-in-shiny-app.html">
     Visualisation in a Shiny App
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-08-16-search-cmip5-data-interactively.html">
     Using ARCCSSive to search CMIP5
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-08-10-Fortran-Debugging-Videos.html">
     Fortran Debugging Video Series
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-08-02-Merge-arrays-with-missing-data.html">
     Merge arrays with missing data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-05-22-python-netcdf.html">
     Python Tuesday: NetCDF Python library overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-05-01-latlon-reference.html">
     Making a lat-lon reference plot
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-04-27-xarray-plot-types.html">
     Xarray plot types
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-04-27-subplots.html">
     Subplots
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-04-24-reading-envi-met.html">
     Reading ENVI_MET files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-04-19-plotting-basics.html">
     Python Plotting Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2018-04-19-cartopy-maps.html">
     Improving maps with Cartopy
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Links
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://climateextremes.org.au">
   CLEX
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="http://climate-cms.wikis.unsw.edu.au">
   CMS Wiki
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://nci.org.au">
   NCI
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/docs/posts/2018-10-12-create-netcdf.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/executablebooks/jupyter-book"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fposts/2018-10-12-create-netcdf.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/posts/2018-10-12-create-netcdf.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-netcdf-file-in-fortran">
   Create a NetCDF file in Fortran
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#netcdf-module">
     netcdf module
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#netcdf-fortran-90-api">
     netcdf Fortran 90 API
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-an-empty-file">
     create an empty file
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-very-basic-header">
     a very basic header
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-dimensions">
       the dimensions
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-variables">
       the variables
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#compression">
       compression
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-attributes">
       the attributes
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#end-definition">
       end definition
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-actual-data">
     The actual data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#writing-the-data">
       writing the data
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#result">
   Result
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#python">
   Python
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>How to create NetCDF files</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-netcdf-file-in-fortran">
   Create a NetCDF file in Fortran
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#netcdf-module">
     netcdf module
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#netcdf-fortran-90-api">
     netcdf Fortran 90 API
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-an-empty-file">
     create an empty file
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-very-basic-header">
     a very basic header
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-dimensions">
       the dimensions
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-variables">
       the variables
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#compression">
       compression
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-attributes">
       the attributes
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#end-definition">
       end definition
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-actual-data">
     The actual data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#writing-the-data">
       writing the data
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#result">
   Result
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#python">
   Python
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="how-to-create-netcdf-files">
<h1>How to create NetCDF files<a class="headerlink" href="#how-to-create-netcdf-files" title="Permalink to this headline">#</a></h1>
<p><strong>Scott Wales, CLEX CMS</strong></p>
<p>This is a very basic introduction into NetCDF files and how to create them.</p>
<p>This document describes how to <strong>create</strong> a NetCDF file in Fortran, and later on in Python. The methods described herein will <strong>overwrite</strong> any existing file with the same name. Opening existing NetCDF files, either for reading or for modifying/appending, is different.</p>
<p>The exact way data is stored in NetCDF Format is not necessary to know, but what you need to know is that each file consists of a header, which contains the meta-data, and the actual data.</p>
<p>Metadata is Data about Data. It tells us the dimensions and datatypes of the data, as well as arbitrary attributes.</p>
<p>Since the header is at the beginning of the file, and can change its length when new data is added or removed, it is very advisable to first create the header before starting to write the data.</p>
<section id="create-a-netcdf-file-in-fortran">
<h2>Create a NetCDF file in Fortran<a class="headerlink" href="#create-a-netcdf-file-in-fortran" title="Permalink to this headline">#</a></h2>
<section id="netcdf-module">
<h3>netcdf module<a class="headerlink" href="#netcdf-module" title="Permalink to this headline">#</a></h3>
<p>While there is an old-style Fortran 77 NetCDF interface, I strongly recommend using the Fortran 90 module invoked with the <code class="docutils literal notranslate"><span class="pre">use</span></code> statement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">program</span> <span class="n">create_netcdf</span>
    <span class="n">use</span> <span class="n">netcdf</span>
    <span class="n">implicit</span> <span class="n">none</span>
<span class="n">end</span> <span class="n">program</span> <span class="n">create_netcdf</span>
</pre></div>
</div>
<p>This is the most basic structure. To compile this program, you need the <code class="docutils literal notranslate"><span class="pre">netcdf</span></code> library in the <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>, on <code class="docutils literal notranslate"><span class="pre">raijin</span></code>, this can be easily achieved by running the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span> <span class="pre">netcdf</span></code> command (or any of the different versions).</p>
<p>Then you need to compile it with the compiler options <code class="docutils literal notranslate"><span class="pre">-lnetcdf</span> <span class="pre">-lnetcdff</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ module load intel-fc/2018.3.222 netcdf/4.6.1
$ ifort -o create_netcdf -lnetcdf -lnetcdff create_netcdf.f90
</pre></div>
</div>
</section>
<section id="netcdf-fortran-90-api">
<h3>netcdf Fortran 90 API<a class="headerlink" href="#netcdf-fortran-90-api" title="Permalink to this headline">#</a></h3>
<p>The full API can be found here: <a class="reference external" href="https://www.unidata.ucar.edu/software/netcdf/netcdf-4/newdocs/netcdf-f90.html">https://www.unidata.ucar.edu/software/netcdf/netcdf-4/newdocs/netcdf-f90.html</a>, but it’s 10 years old and pretty out-of-date.</p>
<p>Better to use the C API here: <a class="reference external" href="https://www.unidata.ucar.edu/software/netcdf/docs/modules.html">https://www.unidata.ucar.edu/software/netcdf/docs/modules.html</a>, always replacing the leading <code class="docutils literal notranslate"><span class="pre">nc_</span></code> with <code class="docutils literal notranslate"><span class="pre">nf90_</span></code>.</p>
<p>But the simple version is: Every instruction is a call to a <strong>function</strong> staring with <code class="docutils literal notranslate"><span class="pre">nf90_</span></code>, which returns an integer value as a status. Status <code class="docutils literal notranslate"><span class="pre">0</span></code> (or <code class="docutils literal notranslate"><span class="pre">NF90_NOERR</span></code>) means that the call was successful.</p>
<p>I strongly suggest writing a little <code class="docutils literal notranslate"><span class="pre">check</span></code> routine, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subroutine</span> <span class="n">check</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">operation</span><span class="p">)</span>
    <span class="n">use</span> <span class="n">netcdf</span>
    <span class="n">implicit</span> <span class="n">none</span>
    <span class="n">integer</span><span class="p">,</span> <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">status</span>
    <span class="n">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="n">intent</span><span class="p">(</span><span class="ow">in</span><span class="p">)</span> <span class="p">::</span> <span class="n">operation</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">status</span> <span class="o">==</span> <span class="n">NF90_NOERR</span><span class="p">)</span> <span class="k">return</span>
    <span class="nb">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;Error encountered during &quot;</span><span class="p">,</span> <span class="n">operation</span>
    <span class="nb">print</span> <span class="o">*</span><span class="p">,</span> <span class="n">nf90_strerror</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
    <span class="n">STOP</span> <span class="mi">1</span>
<span class="n">end</span> <span class="n">subroutine</span> <span class="n">check</span>
</pre></div>
</div>
<p>Then, after every call to any <code class="docutils literal notranslate"><span class="pre">nf90_</span></code> routine, you can call this check to see what happened. If all went fine, the call returns immediately, but if there was an error, you get a human-readable error output.</p>
</section>
<section id="create-an-empty-file">
<h3>create an empty file<a class="headerlink" href="#create-an-empty-file" title="Permalink to this headline">#</a></h3>
<p>To create a file, we need a file handle that is an integer variable, by convention <code class="docutils literal notranslate"><span class="pre">ncid</span></code>, which references the file we created similar to the <code class="docutils literal notranslate"><span class="pre">unit</span></code> of <code class="docutils literal notranslate"><span class="pre">read</span></code> and <code class="docutils literal notranslate"><span class="pre">write</span></code> commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">program</span> <span class="n">create_netcdf</span>
    <span class="n">use</span> <span class="n">netcdf</span>
    <span class="n">implicit</span> <span class="n">none</span>
    <span class="n">integer</span> <span class="p">::</span> <span class="n">status</span><span class="p">,</span> <span class="n">ncid</span>

    <span class="n">status</span> <span class="o">=</span> <span class="n">nf90_create</span><span class="p">(</span><span class="s1">&#39;data.nc&#39;</span><span class="p">,</span> <span class="n">NF90_NETCDF4</span><span class="p">,</span> <span class="n">ncid</span><span class="p">)</span>
    <span class="n">call</span> <span class="n">check</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="s1">&#39;open&#39;</span><span class="p">)</span>
    
    <span class="n">status</span> <span class="o">=</span> <span class="n">nf90_close</span><span class="p">(</span><span class="n">ncid</span><span class="p">)</span>
    <span class="n">call</span> <span class="n">check</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="s1">&#39;close&#39;</span><span class="p">)</span>
  
<span class="n">contains</span>

    <span class="n">subroutine</span> <span class="n">check</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">operation</span><span class="p">)</span>
        <span class="o">....</span>
    <span class="n">end</span> <span class="n">subroutine</span> <span class="n">check</span>
<span class="n">end</span> <span class="n">program</span> <span class="n">create_netcdf</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">NF90_NETCDF4</span></code> tells the NetCDF library which type of NetCDF file to create. This is the most recent version.</p>
<p><em>For the rest of the documentation I will no longer write the calls to <code class="docutils literal notranslate"><span class="pre">check</span></code>, please assume to do that after every call to any <code class="docutils literal notranslate"><span class="pre">nf90_</span></code> function</em></p>
</section>
<section id="a-very-basic-header">
<h3>a very basic header<a class="headerlink" href="#a-very-basic-header" title="Permalink to this headline">#</a></h3>
<p>I now assume that I want to store a 2-d field: latitude by longitude. <code class="docutils literal notranslate"><span class="pre">ny</span></code> and <code class="docutils literal notranslate"><span class="pre">nx</span></code> are the number of gridpoints in latitude and longitude respectively. The field itself I simply call <code class="docutils literal notranslate"><span class="pre">field</span></code>, and <code class="docutils literal notranslate"><span class="pre">lat_array</span></code> and <code class="docutils literal notranslate"><span class="pre">lon_array</span></code> are arrays with the values for latitude and longitude.</p>
<section id="the-dimensions">
<h4>the dimensions<a class="headerlink" href="#the-dimensions" title="Permalink to this headline">#</a></h4>
<p>First, we need the dimensions. Fundamentally, a dimension is just a name, and a length. For each dimension, we need an integer variable called a dimension id, or dimid. Assume we declared dimids for latitude and longitude called <code class="docutils literal notranslate"><span class="pre">dimid_lat</span></code> and <code class="docutils literal notranslate"><span class="pre">dimid_lon</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">status</span> <span class="o">=</span> <span class="n">nf90_def_dim</span><span class="p">(</span><span class="n">ncid</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="n">nx</span><span class="p">,</span> <span class="n">dimid_lon</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">nf90_def_dim</span><span class="p">(</span><span class="n">ncid</span><span class="p">,</span> <span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">dimid_lat</span><span class="p">)</span>
</pre></div>
</div>
<p>We’re only using fixed-length dimensions here, but if we wanted am unlimited dimension, we’d write <code class="docutils literal notranslate"><span class="pre">NF90_UNLIMITED</span></code> as the length of the dimensions (where we currently have <code class="docutils literal notranslate"><span class="pre">nx</span></code> and <code class="docutils literal notranslate"><span class="pre">ny</span></code>, respectively).</p>
</section>
<section id="the-variables">
<h4>the variables<a class="headerlink" href="#the-variables" title="Permalink to this headline">#</a></h4>
<p>Next, we define 3 more integer variables, <code class="docutils literal notranslate"><span class="pre">varid_*</span></code>, one each for longitude and latitude (those will contain the actual values for the latitude and longitudes, and of course our field.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">status</span> <span class="o">=</span> <span class="n">nf90_def_var</span><span class="p">(</span><span class="n">ncid</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="n">NF90_FLOAT</span><span class="p">,</span> <span class="p">[</span><span class="n">dimid_lon</span><span class="p">],</span> <span class="n">varid_lon</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">nf90_def_var</span><span class="p">(</span><span class="n">ncid</span><span class="p">,</span> <span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">NF90_FLOAT</span><span class="p">,</span> <span class="p">[</span><span class="n">dimid_lat</span><span class="p">],</span> <span class="n">varid_lat</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">nf90_def_var</span><span class="p">(</span><span class="n">ncid</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="n">NF90_FLOAT</span><span class="p">,</span> <span class="p">[</span><span class="n">dimid_lon</span><span class="p">,</span> <span class="n">dimid_lat</span><span class="p">],</span> <span class="n">varid_field</span><span class="p">)</span>
</pre></div>
</div>
<p>You can see that each variable needs a name, a type (in this case 32-bit floating points), an array of dimensions (referenced by the dimension IDs), and a new integer variable which references the variable itself.</p>
</section>
<section id="compression">
<h4>compression<a class="headerlink" href="#compression" title="Permalink to this headline">#</a></h4>
<p>The field in our example is fairly small, but if it were larger, we would want to chunk and compress it.
You can read about what chunking does here: <a class="reference external" href="https://www.unidata.ucar.edu/blogs/developer/entry/chunking_data_why_it_matters">https://www.unidata.ucar.edu/blogs/developer/entry/chunking_data_why_it_matters</a></p>
<p>But here’s how we do that in the Fortran Code: After we have defined a variable, we add this line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">status</span> <span class="o">=</span> <span class="n">nf90_def_var_chunking</span><span class="p">(</span><span class="n">ncid</span><span class="p">,</span> <span class="n">varid_field</span><span class="p">,</span> <span class="n">NF90_CHUNKED</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">101</span><span class="p">])</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">NF90_CHUNKED</span></code> – as opposed to <code class="docutils literal notranslate"><span class="pre">NF90_CONTIGUOUS</span></code>, tells that the variable shall be chunked. We can also use an array to declare how the data should be chunked specifically.</p>
<p>Once the data is declared as chunked, we can compress – or deflate it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">status</span> <span class="o">=</span> <span class="n">nf90_def_var_deflate</span><span class="p">(</span><span class="n">ncid</span><span class="p">,</span> <span class="n">varid_field</span><span class="p">,</span>          <span class="o">&amp;</span>
                                  <span class="n">shuffle</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>                <span class="o">&amp;</span>
                                  <span class="n">deflate</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>                <span class="o">&amp;</span>
                                  <span class="n">deflate_level</span> <span class="o">=</span> <span class="mi">5</span>  <span class="p">)</span>
</pre></div>
</div>
<p>Here we have a noticeable point, both <code class="docutils literal notranslate"><span class="pre">shuffle</span></code> and <code class="docutils literal notranslate"><span class="pre">deflate</span></code> technically only need a boolean, but for reasons, you have to give them an integer: 0 for false, any other number for true.</p>
<p><code class="docutils literal notranslate"><span class="pre">shuffle</span></code> isn’t all that important, but you might as well use it. <code class="docutils literal notranslate"><span class="pre">deflate</span></code> tells the netCDF library that the variable should be compressed. The compression level can be set between 0 and 9. 5 is usually a good compromise.</p>
</section>
<section id="the-attributes">
<h4>the attributes<a class="headerlink" href="#the-attributes" title="Permalink to this headline">#</a></h4>
<p>Attributes can be attached to a variable, or to the file itself (global attribute). Common attributes are the units, long names, et cetera.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">status</span> <span class="o">=</span> <span class="n">nf90_put_att</span><span class="p">(</span><span class="n">ncid</span><span class="p">,</span> <span class="n">NF90_GLOBAL</span><span class="p">,</span> <span class="s1">&#39;note&#39;</span><span class="p">,</span> <span class="s1">&#39;training file created with Fortran 90&#39;</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">nf90_put_att</span><span class="p">(</span><span class="n">ncid</span><span class="p">,</span> <span class="n">varid_lon</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">,</span> <span class="s1">&#39;degree_east&#39;</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">nf90_put_att</span><span class="p">(</span><span class="n">ncid</span><span class="p">,</span> <span class="n">varid_lat</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">,</span> <span class="s1">&#39;degree_north&#39;</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">nf90_put_att</span><span class="p">(</span><span class="n">ncid</span><span class="p">,</span> <span class="n">varid_field</span><span class="p">,</span> <span class="s1">&#39;_FillValue&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mf">2e8</span><span class="p">)</span>
</pre></div>
</div>
<p>We can add any number of attributes to each variable, or even to the global file. They can be of any common type. For a list of attribute conventions, you can look here: <a class="reference external" href="http://cfconventions.org/">http://cfconventions.org/</a></p>
</section>
<section id="end-definition">
<h4>end definition<a class="headerlink" href="#end-definition" title="Permalink to this headline">#</a></h4>
<p>With NetCDF versions before version 4, we needed to tell the Fortran Module that we’re finished with the header by calling <code class="docutils literal notranslate"><span class="pre">nf90_enddef</span></code>, but with NetCDF4 this is no longer necessary. Note that if you use older versions of NetCDF (declared in the <code class="docutils literal notranslate"><span class="pre">nf90_create</span></code> instruction above, you would have to make a call to <code class="docutils literal notranslate"><span class="pre">nf90_enddef</span></code> here.</p>
</section>
</section>
<section id="the-actual-data">
<h3>The actual data<a class="headerlink" href="#the-actual-data" title="Permalink to this headline">#</a></h3>
<p>Let’s create some data. I’m using implicit do loops to create even-spaced latitude and longitude arrays, and the <code class="docutils literal notranslate"><span class="pre">field</span></code> variable gets created in a do-loop:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">lat_array</span> <span class="o">=</span> <span class="p">[(</span><span class="n">jj</span> <span class="o">*</span> <span class="p">(</span><span class="mf">360.</span><span class="o">/</span><span class="n">ny</span><span class="p">),</span> <span class="n">jj</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ny</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
    <span class="n">lon_array</span> <span class="o">=</span> <span class="p">[((</span><span class="n">ii</span> <span class="o">*</span> <span class="p">(</span><span class="mf">180.</span><span class="o">/</span><span class="p">(</span><span class="n">nx</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="o">-</span> <span class="mf">90.</span><span class="p">),</span> <span class="n">ii</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nx</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
    <span class="n">do</span> <span class="n">jj</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ny</span>
        <span class="n">do</span> <span class="n">ii</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">nx</span>
            <span class="n">field</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">)</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">lon_array</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mf">180.</span><span class="p">)</span> <span class="o">*</span> <span class="o">&amp;</span>
                <span class="n">cos</span><span class="p">(</span><span class="n">lat_array</span><span class="p">(</span><span class="n">jj</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span><span class="o">/</span><span class="mf">180.</span><span class="p">)</span>
        <span class="n">end</span> <span class="n">do</span>
    <span class="n">end</span> <span class="n">do</span>
</pre></div>
</div>
<section id="writing-the-data">
<h4>writing the data<a class="headerlink" href="#writing-the-data" title="Permalink to this headline">#</a></h4>
<p>It is worth noting that the variable <strong>definition</strong> of the <code class="docutils literal notranslate"><span class="pre">field</span></code> has the dimensions in the same order as the actual 2-d array. This makes things very easy:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">status</span> <span class="o">=</span> <span class="n">nf90_put_var</span><span class="p">(</span><span class="n">ncid</span><span class="p">,</span> <span class="n">varid_lon</span><span class="p">,</span> <span class="n">lon_array</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">nf90_put_var</span><span class="p">(</span><span class="n">ncid</span><span class="p">,</span> <span class="n">varid_lat</span><span class="p">,</span> <span class="n">lat_array</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">nf90_put_var</span><span class="p">(</span><span class="n">ncid</span><span class="p">,</span> <span class="n">varid_field</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="result">
<h2>Result<a class="headerlink" href="#result" title="Permalink to this headline">#</a></h2>
<p>Looking at the output file, we notice something:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ncdump -hs data.nc
netcdf data {
dimensions:
	longitude = 200 ;
	latitude = 101 ;
variables:
	float longitude(longitude) ;
		longitude:units = &quot;degree_east&quot; ;
		longitude:_Storage = &quot;contiguous&quot; ;
		longitude:_Endianness = &quot;little&quot; ;
	float latitude(latitude) ;
		latitude:units = &quot;degree_north&quot; ;
		latitude:_Storage = &quot;contiguous&quot; ;
		latitude:_Endianness = &quot;little&quot; ;
	float field(latitude, longitude) ;
		field:_FillValue = -2.e+08f ;
		field:_Storage = &quot;chunked&quot; ;
		field:_ChunkSizes = 101, 10 ;
		field:_DeflateLevel = 5 ;
		field:_Shuffle = &quot;true&quot; ;
		field:_Endianness = &quot;little&quot; ;

// global attributes:
		:note = &quot;training file created with Fortran 90&quot; ;
		:_NCProperties = &quot;version=1|netcdflibversion=4.6.1|hdf5libversion=1.10.2&quot; ;
		:_SuperblockVersion = 0 ;
		:_IsNetcdf4 = 1 ;
		:_Format = &quot;netCDF-4&quot; ;
}
</pre></div>
</div>
<p>In Fortran, we always had the dimensions of <code class="docutils literal notranslate"><span class="pre">field</span></code> as (longitude, latitude), now it’s the other way round.</p>
<p>That’s because Fortran stores multi-dimensional arrays the other way as almost all other programming languages.</p>
</section>
<section id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this headline">#</a></h2>
<p>There are different methods to read and write NetCDF in Python, but <code class="docutils literal notranslate"><span class="pre">xarray</span></code> is one of the most convenient. It can store the complete datastructure in memory, the output is then only a single instruction:</p>
<p>First, import <code class="docutils literal notranslate"><span class="pre">xarray</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import xarray as xr
import numpy as np
%matplotlib inline
</pre></div>
</div>
</div>
</div>
<p>Second: Create the latitude and longitude arrays:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>nx = 200; ny = 101
lon_array = np.linspace(0, 360, nx, endpoint=False, dtype=np.float32)
lat_array = np.linspace(-90, 90, ny, endpoint=True, dtype=np.float32)
</pre></div>
</div>
</div>
</div>
<p>Third: Create the field, complete with values, dimensions, coordinates, and attributes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>field=xr.DataArray(
    np.sin(lon_array[np.newaxis, :] * np.pi / 180.) * 
    np.cos(lat_array[:, np.newaxis] * np.pi / 180.),
    dims = [&#39;latitude&#39;, &#39;longitude&#39;], 
    coords = {&#39;latitude&#39;: lat_array, &#39;longitude&#39;: lon_array},
    attrs = {&#39;_FillValue&#39;:-2e8},
)
</pre></div>
</div>
</div>
</div>
<p>Fourth: The coordinate arrays don’t have units yet, let’s fix that.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>field.longitude.attrs[&#39;units&#39;] = &#39;degree_east&#39;
field.latitude.attrs[&#39;units&#39;] = &#39;degree_north&#39;
</pre></div>
</div>
</div>
</div>
<p>Fifth: Create a Dataset containing all (in this case only one) fields. The netcdf file attributes are taken from the dataset attributes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>ds = xr.Dataset({&#39;field&#39;:field}, attrs={&#39;note&#39;:&#39;training file created with xarray&#39;})
</pre></div>
</div>
</div>
</div>
<p>Sixth: Use a single instruction to store all the data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>ds.to_netcdf(&#39;data.nc&#39;, format=&#39;NETCDF4&#39;, 
             encoding={&#39;field&#39;:{
                                &#39;shuffle&#39;:True,
                                &#39;chunksizes&#39;:[101, 10],
                                &#39;zlib&#39;:True,
                                &#39;complevel&#39;:5
            }})
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>!ls data.nc
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>data.nc
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>!ncdump -hs data.nc
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>netcdf data {
dimensions:
	longitude = 200 ;
	latitude = 101 ;
variables:
	float longitude(longitude) ;
		longitude:_FillValue = NaNf ;
		longitude:units = &quot;degree_east&quot; ;
		longitude:_Storage = &quot;contiguous&quot; ;
		longitude:_Endianness = &quot;little&quot; ;
	float latitude(latitude) ;
		latitude:_FillValue = NaNf ;
		latitude:units = &quot;degree_north&quot; ;
		latitude:_Storage = &quot;contiguous&quot; ;
		latitude:_Endianness = &quot;little&quot; ;
	float field(latitude, longitude) ;
		field:_FillValue = -2.e+08f ;
		field:_Storage = &quot;chunked&quot; ;
		field:_ChunkSizes = 101, 10 ;
		field:_DeflateLevel = 5 ;
		field:_Shuffle = &quot;true&quot; ;
		field:_Endianness = &quot;little&quot; ;

// global attributes:
		:note = &quot;training file created with xarray&quot; ;
		:_NCProperties = &quot;version=1|netcdflibversion=4.6.1|hdf5libversion=1.10.1&quot; ;
		:_SuperblockVersion = 0 ;
		:_IsNetcdf4 = 1 ;
		:_Format = &quot;netCDF-4&quot; ;
}
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./posts"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../contents/tag-fortran.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">fortran</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../contents/tag-model.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">model</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By CLEX CMS<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>